<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{./assets/css/IssueInstance.css}">
</head>
<body>
   <div th:fragment="issueFragment(issue, comments)" class="page-header-content">
       <div class="header2">
           <div class="d-flex flex-column align-items-start">
               <a href="/vehicles" class="btn btn-link text-decoration-none backButton">
                   <i class="bi bi-arrow-left"></i> Issues
               </a>
               <h1 class="main-title" th:text="${issue.summary}">Issue Title</h1>
               <button class="edit-labels">
                   Edit Labels
               </button>
           </div>
           <div class="header-buttons">
               <img src="/assets/img/profile-img.jpg" alt="Profile Image" class="timeline-icon2">
               <img src="/assets/img/profile-img.jpg" alt="Profile Image" class="timeline-icon2">
               <img src="/assets/img/add-user.png" alt="Add Someone" class="timeline-icon2">
               <button type="button" class="general-button">Unwatch</button>
               <button type="button" class="general-button">...</button>
               <button class="btn btn-outline-primary me-2" type="button">Edit</button>
               <button class="btn resolve-btn" type="button" style="background-color: green;">Resolve</button>
           </div>
       </div>
       <div class="main-issues-content">
           <div class="details">
               <h2 class="section-header">Details</h2>
               <h3 class="subheader">Pinned Fields</h3>
               <h3 class="subheader">All Fields</h3>
               <div class="field">
                   <div class="field-label">Issue #</div>
                   <div class="field-value" th:text="${issue.issueNumber}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Status</div>
                   <div class="field-value" th:text="${issue.status}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Summary</div>
                   <div class="field-value" th:text="${issue.summary}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Description</div>
                   <div class="field-value" th:text="${issue.description}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Priority</div>
                   <div class="field-value" th:text="${issue.priority}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Vehicle</div>
                   <div class="field-value" th:text="${issue.vehicleId}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Reported Date</div>
                   <div class="field-value" th:text="${issue.reportedDate}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Reported By</div>
                   <div class="field-value" th:text="${issue.reportedBy}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Source</div>
                   <div class="field-value" th:text="${issue.source}"></div>
               </div>
               <div class="field">
                   <div class="field-label">Assigned To</div>
                   <div class="field-value">-</div>
               </div>
           </div>
           <div class="timeline">
               <h2 class="section-header">Timeline</h2>
               <div class="timeline-item">
                   <div class="timeline-icon">
                       <img src="/assets/img/warning.png" alt="Caution Icon">
                   </div>
                   <div class="timeline-content">
                       <p><strong>Issue Opened</strong> by workflow</p>
                   </div>
                   <div class="timeline-time">3m</div>
               </div>
               <div class="timeline-connector"></div>
               <div class="timeline-item">
                   <div class="timeline-icon">
                       <img src="/assets/img/profile-img.jpg" alt="Grace Elliott">
                   </div>
                   <div class="timeline-content">
                       <p><strong>Grace Elliott</strong> submitted an inspection item</p>
                       <p><a href="#">Inspection Submission #16084640</a></p>
                       <p><div class="timeline-badge">NO</div></p>
                       <img src="/assets/img/car-inspection.png" alt="Inspection Image" class="timeline-image">
                   </div>
                   <div class="timeline-time">3m</div>
               </div>
           </div>
           <div class="sidebar2">
               <h3>Comments</h3>

		          <div class="comments-section">
		              
		              <div th:if="${#lists.isEmpty(comments)}">
		                  <div class="no-comments">
		                      <img src="/assets/img/comment.png" alt="Comment Icon">
		                      <p>Start a conversation or leave a note by adding a comment below.</p>
		                  </div>
		              </div>
		              <div th:each="comment : ${comments}">
		                  <div class="comment">
		                      <img src="/assets/img/profile-img.jpg" alt="Profile Image" class="rounded-circle">
		                      <div class="comment-content">
		                          <h4 th:text="${comment.user}">User Name</h4>
		                          <p th:text="${comment.message}">Comment message</p>
		                          <time th:text="${comment.datePosted}">Comment date</time>
		                      </div>
		                  </div>
		              </div>
		              <div class="comment-form">
                          <form th:action="@{/issues/{id}/comments(id=${issue.id})}" method="post">
                              <textarea name="message" placeholder="Add a Comment"></textarea>
                              <button type="submit" class="submit-button">Submit</button>
                          </form>
		              </div>
		          </div>
              
           </div>
           <div class="open-sidebar-btn" onclick="toggleSidebar()">
               <div class="sidebar-btn"> |â†’</div>
           </div>
       </div>
   </div>
</body>
</html>
